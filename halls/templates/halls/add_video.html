{% extends "halls/base.html" %} {%block content%}
<div class="container">
  <h2>Add video to {{hall.title}}</h2>
  {% load crispy_forms_tags %}
  <form method="POST" id="sub">
    {% csrf_token %} {{form|crispy}}
    <button type="submit" class="btn btn-primary">Upload</button>
  </form>
  <br />
  <h2>Or</h2>
  <form>{{search_form|crispy}}</form>
  <div id="search_results"></div>
  <script>
    var delayTimer;
    $("#id_search_term").keyup(function () {
      clearTimeout(delayTimer);
      $("#search_results").text("Loading...");
      delayTimer = setTimeout(function () {
        var text = $("#id_search_term").val();
        $.ajax({
          url: "/video/search",
          data: {
            search_term: text,
          },
          dataType: "json",
          success: function (data) {
            $("#search_results").text(data["hello"]);
          },
        });
      }, 2000);
    });
  </script>
</div>
{% endblock %}

<!-- <form method="post">
  {% csrf_token %} {%load widget_tweaks%} {%for field in form%}
  <div class="form-group {% if field.errors %}alert alert-danger{% endif %}">
    {{field.errors}} {{field.label_tag}} {% render_field field
    class="form-control" %}
  </div>
  {%endfor%}
  {% comment %} {{formset.management_form}} {%for aform in form%}
  {% endcomment %} {% comment %} {% for field in form %}
  <p>
    {{field.errors}} {% comment %} for errors {% endcomment %} {% comment %}
    {{field.label_tag}} {{field}}
  </p>
  {%endfor%} {% endcomment %}
  <button type="submit" class="btn btn-primary">Create</button>
</form> -->
